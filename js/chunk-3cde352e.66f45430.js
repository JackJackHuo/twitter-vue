(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3cde352e"],{"6f1a":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tweet__container"},[t.isReplying?a("ReplyModal",{attrs:{tweetId:t.clickedTweetId},on:{"after-submit-reply":t.afterSubmitReply}}):t._e(),t.isLoading?a("Spinner"):[a("div",{staticClass:"tweet__navbar"},[a("a",{staticClass:"tweet__navbar--prev",on:{click:function(e){return t.$router.back()}}}),a("div",{staticClass:"tweet__navbar--info"},[t._v("推文")])]),a("div",{staticClass:"tweet__card"},[a("div",{staticClass:"tweet__title"},[a("div",{staticClass:"tweet__avatar--container"},[a("router-link",{attrs:{to:{name:"user",params:{id:t.tweet.User.id}}}},[a("img",{staticClass:"tweet__avatar",attrs:{src:t._f("emptyImage")(t.tweet.User.avatar),alt:""}})])],1),a("div",{staticClass:"tweet__title--info"},[a("h3",{staticClass:"tweet__title--name"},[t._v(t._s(t.tweet.User.name))]),a("router-link",{attrs:{to:{name:"user",params:{id:t.tweet.User.id}}}},[a("p",{staticClass:"tweet__title--account"},[t._v("@"+t._s(t.tweet.User.account))])])],1)]),a("p",{staticClass:"tweet__context"},[t._v(" "+t._s(t.tweet.description)+" ")]),a("span",{staticClass:"tweet__time"},[t._v(t._s(t._f("timeTransForm")(t.tweet.createdAt)))]),a("div",{staticClass:"tweet__counts"},[a("span",{staticClass:"tweet__commentCounts"},[t._v(t._s(t.tweet.reply_count)),a("span",[t._v("回覆")])]),a("span",{staticClass:"tweet__likeCounts"},[t._v(t._s(t.tweet.like_count)),a("span",[t._v("喜歡次數")])])]),a("div",{staticClass:"tweet__interactions"},[a("img",{staticClass:"tweet__commentBtn",attrs:{src:s("0fac"),alt:""},on:{click:function(e){return t.handleReplyModalToggle(t.tweet.id)}}}),t.tweet.isLiked?a("img",{staticClass:"tweet__likeBtn",attrs:{src:s("2849"),alt:""},on:{click:function(e){return t.deleteLike(t.tweet.id)}}}):a("img",{staticClass:"tweet__likeBtn",attrs:{src:s("5292"),alt:""},on:{click:function(e){return t.addLike(t.tweet.id)}}})])]),a("div",{staticClass:"tweet__replies--container scroll"},[a("ul",{staticClass:"tweet__replies"},t._l(t.tweetReplies,(function(e){return a("li",{key:e.id,staticClass:"tweet__reply"},[a("div",{staticClass:"reply__avatar--container"},[a("img",{staticClass:"reply__avatar",attrs:{src:t._f("emptyImage")(e.User.avatar),alt:""}})]),a("div",{staticClass:"tweet__reply--content"},[a("div",{staticClass:"tweet__reply--title"},[a("h3",{staticClass:"reply__user--name"},[t._v(t._s(e.User.name))]),a("span",{staticClass:"reply__user--account"},[a("router-link",{attrs:{to:{name:"user",params:{id:e.User.id}}}},[a("span",[t._v(t._s(e.User.account))])]),a("span",[t._v("．"+t._s(t._f("fromNow")(e.createdAt)))])],1)]),a("p",{staticClass:"tweet__reply--tag"},[a("span",[t._v("回覆")]),a("router-link",{attrs:{to:{name:"user",params:{id:t.tweet.User.id}}}},[a("span",{staticClass:"tweet__account"},[t._v(" "+t._s(t.tweet.User.account)+" ")])])],1),a("p",{staticClass:"tweet__reply--text"},[t._v(" "+t._s(e.comment)+" ")])])])})),0)])]],2)},r=[],i=s("2909"),n=s("5530"),c=s("1da1"),o=(s("96cf"),s("a4d3"),s("e01a"),s("2797")),l=s("2375"),u=s("6783"),_=s("2fa3"),d=s("2708"),w=s("2f62"),p={name:"Tweet",components:{ReplyModal:o["a"],Spinner:l["a"]},mixins:[d["b"],d["c"],d["a"]],data:function(){return{tweet:{},tweetReplies:[],isLoading:!1}},computed:Object(w["c"])({isReplying:function(t){return t.statusControlModule.isReplying}}),created:function(){this.$store.commit("statusControlModule/toggleTopUsersDisplayStatus","tweets");var t=this.$route.params.id;this.fetchTweet(t),this.fetchTweetReplies(t)},beforeRouteUpdate:function(t,e,s){var a=t.params.id;this.fetchTweet(a),this.fetchTweetReplies(a),s()},methods:{fetchTweet:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var a,r,i,c,o,l,d,w,p,f;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.isLoading=!0,s.prev=1,s.next=4,u["a"].getTweet({tweetId:t});case 4:if(a=s.sent,200===a.status){s.next=7;break}throw new Error(a.statusText);case 7:r=a.data,i=r.id,c=r.description,o=r.UserId,l=r.createdAt,d=r.like_count,w=r.reply_count,p=r.User,f=r.isLiked,e.tweet=Object(n["a"])(Object(n["a"])({},e.tweet),{},{id:i,description:c,UserId:o,createdAt:l,like_count:d,reply_count:w,User:p,isLiked:f}),e.isLoading=!1,s.next=18;break;case 13:s.prev=13,s.t0=s["catch"](1),e.isLoading=!1,console.log("error",s.t0),_["a"].fire({icon:"error",title:"無法得到推文資料，請稍後再試!"});case 18:case"end":return s.stop()}}),s,null,[[1,13]])})))()},fetchTweetReplies:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.isLoading=!0,s.prev=1,s.next=4,u["a"].reply.getReplies({tweetId:t});case 4:if(a=s.sent,200===a.status){s.next=7;break}throw new Error(a.statusText);case 7:r=a.data,e.tweetReplies=Object(i["a"])(r),e.isLoading=!1,s.next=17;break;case 12:s.prev=12,s.t0=s["catch"](1),e.isLoading=!1,console.log("error",s.t0),_["a"].fire({icon:"error",title:"無法得到推文回覆，請稍後再試!"});case 17:case"end":return s.stop()}}),s,null,[[1,12]])})))()},addLike:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u["a"].like.addLike({tweetId:t});case 3:if(a=s.sent,200===a.status){s.next=6;break}throw new Error(a.statusText);case 6:e.tweet.isLiked=!0,_["a"].fire({icon:"success",title:"成功對推文按讚"}),s.next=14;break;case 10:s.prev=10,s.t0=s["catch"](0),console.log("error",s.t0),_["a"].fire({icon:"error",title:"無法對推文按讚，請稍後再試"});case 14:case"end":return s.stop()}}),s,null,[[0,10]])})))()},deleteLike:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u["a"].like.deleteLike({tweetId:t});case 3:if(a=s.sent,200===a.status){s.next=6;break}throw new Error(a.statusText);case 6:e.tweet.isLiked=!1,_["a"].fire({icon:"success",title:"成功取消推文按讚"}),s.next=14;break;case 10:s.prev=10,s.t0=s["catch"](0),console.log("error",s.t0),_["a"].fire({icon:"error",title:"無法取消推文按讚，請稍後再試"});case 14:case"end":return s.stop()}}),s,null,[[0,10]])})))()},handleReplyModalToggle:function(t){this.$store.commit("statusControlModule/toggleReplyModal"),this.clickedTweetId=t},afterSubmitReply:function(t){200===t.status?(this.tweet.reply_count++,this.fetchTweetReplies(this.tweet.id),_["a"].fire({icon:"success",title:"成功回覆推文"})):_["a"].fire({icon:"error",title:"無法回覆推文，請稍後再試!"})}}},f=p,v=(s("851b"),s("2877")),m=Object(v["a"])(f,a,r,!1,null,"fa4ec9a2",null);e["default"]=m.exports},"851b":function(t,e,s){"use strict";s("c0d2")},c0d2:function(t,e,s){}}]);
//# sourceMappingURL=chunk-3cde352e.66f45430.js.map