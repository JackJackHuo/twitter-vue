(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a3487f2"],{"90cc":function(t,e,s){t.exports=s.p+"img/Vector_close02-icon.b5bfdf04.svg"},bb67:function(t,e,s){},be6c:function(t,e,s){"use strict";var a=s("2fa3");e["a"]={signIn:function(t){var e=t.account,s=t.password;return a["b"].post("/admin/signin",{account:e,password:s})},getUsers:function(){return a["b"].get("/admin/users")},getTweets:function(){return a["b"].get("/admin/tweets")},deleteTweet:function(t){var e=t.tweetId;return a["b"].delete("/admin/tweets/".concat(e))}}},ed4e:function(t,e,s){"use strict";s("bb67")},fa6a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"admin_tweets"},[a("div",{staticClass:"admin_tweets-container"},[t._m(0),a("div",{staticClass:"tweets-container scrollbar"},[t.isLoading?a("Spinner"):t._l(t.admintweets,(function(e){return a("div",{key:e.id,staticClass:"users_list"},[a("div",{staticClass:"users_list-image"},[a("img",{staticClass:"users-img",attrs:{src:t._f("emptyImage")(e.UserAvatar),alt:"avatar"}})]),a("div",{staticClass:"users_list-tweet"},[a("div",{staticClass:"users_list-tweet-info"},[a("router-link",{staticClass:"user-name-link",attrs:{to:{params:{id:e.id}}}},[a("div",{staticClass:"user-name"},[t._v(t._s(e.UserName))])]),a("router-link",{staticClass:"user-info-link",attrs:{to:{params:{id:e.userId}}}},[a("div",{staticClass:"user-account"},[t._v("@"+t._s(e.UserAccount))]),a("span"),a("div",{staticClass:"create-time"},[t._v(" "+t._s(t._f("timeTransForm")(e.createdAt))+" ")])])],1),a("div",{staticClass:"text-content"},[t._v(" "+t._s(e.description)+" ")])]),a("div",{staticClass:"delete"},[a("div",{staticClass:"delete-container cursor-pointer",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteTweet(e.id)}}},[a("img",{staticClass:"delete-icon",attrs:{src:s("90cc"),alt:""}})])])])}))],2)])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"admin_tweets-title"},[s("p",[t._v("推文清單")])])}],i=s("1da1"),r=(s("4de4"),s("d3b7"),s("96cf"),s("2708")),c=s("be6c"),o=s("2fa3"),u=s("2375"),d={name:"tweets",mixins:[r["c"],r["a"]],components:{Spinner:u["a"]},data:function(){return{currentPage:"tweets",admintweets:[],isLoading:!0}},beforeRouteUpdate:function(t,e,s){var a=t.params.id;this.fetchAdminTweets(a),s()},created:function(){this.$store.commit("statusControlModule/toggleTopUsersDisplayStatus","admin-tweets"),this.fetchAdminTweets()},methods:{fetchAdminTweets:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,c["a"].getTweets();case 4:s=e.sent,a=s.data,t.admintweets=a.tweets,t.isLoading=!1,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),t.isLoading=!1,o["a"].fire({icon:"error",title:"無法取得推文資料，請稍後再試"});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},deleteTweet:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.isLoading=!0,s.prev=1,s.next=4,c["a"].deleteTweet({tweetId:t});case 4:if(a=s.sent,200===a.status){s.next=7;break}throw new Error(a.statusText);case 7:e.admintweets=e.admintweets.filter((function(e){return e.id!==t})),e.isLoading=!1,o["a"].fire({icon:"success",title:"成功刪除推文"}),s.next=16;break;case 12:s.prev=12,s.t0=s["catch"](1),e.isLoading=!1,o["a"].fire({icon:"error",title:"無法刪除推文，請稍後再試"});case 16:case"end":return s.stop()}}),s,null,[[1,12]])})))()}}},l=d,f=(s("ed4e"),s("2877")),m=Object(f["a"])(l,a,n,!1,null,"31ff4a15",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-4a3487f2.ab4d9695.js.map